basePath: /v1
definitions:
  models.Asset:
    properties:
      create:
        example: "2019-05-30T17:50:22.127785Z"
        type: string
      id:
        example: bd3a7efc-680a-40f8-bb52-bb754f9b6869
        type: string
      locale:
        example: ru-blr
        type: string
      name:
        example: low_pressure_alert
        type: string
      released:
        example: true
        type: boolean
      tags:
        example:
        - '[wordy'
        - ' to_revise'
        - ' latest_release]'
        items:
          type: string
        type: array
      type:
        example: sms
        type: string
      updated:
        example: 2019-05]6-30T17:50:22.127785Z
        type: string
      value:
        example: FLO has detected water low pressure, recommend to inspect water lines
        type: string
    type: object
  models.Assets:
    properties:
      items:
        items:
          $ref: '#/definitions/models.Asset'
        type: array
      meta:
        $ref: '#/definitions/models.Meta'
        type: object
    type: object
  models.ErrorResponse:
    properties:
      message:
        type: string
      status:
        type: integer
    type: object
  models.Locale:
    properties:
      created:
        example: "2019-05-23T04:13:14Z"
        type: string
      fallback:
        example: ru_ru
        type: string
      id:
        example: ru_blr
        type: string
      released:
        example: true
        type: boolean
      updated:
        example: "2019-06-22T04:13:14Z"
        type: string
    type: object
  models.Locales:
    properties:
      items:
        items:
          $ref: '#/definitions/models.Locale'
        type: array
      meta:
        $ref: '#/definitions/models.Meta'
        type: object
    type: object
  models.Localized:
    properties:
      id:
        example: bd3a7efc-680a-40f8-bb52-bb754f9b6869
        type: string
      locale:
        example: ru-blr
        type: string
      localizedValue:
        example: FLO has detected water low pressure, recommend to inspect water lines
        type: string
      name:
        example: low_pressure_alert
        type: string
      type:
        example: sms
        type: string
    type: object
  models.LocalizedRequest:
    properties:
      args:
        type: object
      locale:
        example: ru-blr
        type: string
      name:
        example: low_pressure_alert
        type: string
      type:
        example: sms
        type: string
    type: object
  models.LocalizedRequestItems:
    properties:
      items:
        items:
          $ref: '#/definitions/models.LocalizedRequest'
        type: array
    type: object
  models.Meta:
    properties:
      limit:
        example: 10
        type: integer
      offset:
        example: 0
        type: integer
      total:
        example: 1
        type: integer
    type: object
  models.Ping:
    properties:
      build_date:
        example: "2019-05-03T18:44:37Z"
        type: string
      commit_name:
        example: Merge_branch_'ag_todos'_into_'dev'_cleanup_and_todo_See_merge_request_flotechnologies/flo-localization-service!49
        type: string
      commit_sha:
        example: b32ecf837b64055626a7403c15c8fb8195f4197a
        type: string
      env:
        example: dev
        type: string
      service_name:
        example: flo-localization-service
        type: string
      timestamp:
        example: flo-localization-service
        type: string
    type: object
  models.ResponseOnCreatingNewLocale:
    properties:
      id:
        example: bd3a7efc-680a-40f8-bb52-bb754f9b6969
        type: string
    type: object
  models.Type:
    properties:
      created:
        example: "2019-05-23T04:13:14Z"
        type: string
      description:
        example: text message
        type: string
      type:
        example: sms
        type: string
      updated:
        example: "2019-06-22T04:13:14Z"
        type: string
    type: object
  models.TypeItems:
    properties:
      items:
        items:
          $ref: '#/definitions/models.Type'
        type: array
    type: object
  models.Types:
    properties:
      items:
        items:
          $ref: '#/definitions/models.Type'
        type: array
      meta:
        $ref: '#/definitions/models.Meta'
        type: object
    type: object
host: flo-localization-service.flocloud.co
info:
  contact:
    email: alex.galushka@flotechnologies.com
    name: Alexander Galushka
  description: Localization Service (LS) is responsible for providing FLO Technologies
    localized content (language and country specific).
  license: {}
  title: Localization Service (LS) API
  version: "1.0"
paths:
  /assets:
    get:
      consumes:
      - application/json
      description: 'This endpoint gets filtered (if any filters provided) paginated
        localized assets. Default values for pagination are: 0 for offset, 10 for
        limit.'
      parameters:
      - description: filter by name
        in: query
        name: name
        type: string
      - description: filter by type
        in: query
        name: type
        type: string
      - description: filter by locale
        in: query
        name: locale
        type: string
      - description: filter by released flag
        in: query
        name: released
        type: boolean
      - description: fuzzy search within asset name column, e.g. search=valve
        in: query
        name: search
        type: string
      - description: pagination offset
        in: query
        name: offset
        type: integer
      - description: pagination limit
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Assets'
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
      summary: gets localized assets
      tags:
      - localization
    post:
      consumes:
      - application/json
      description: |-
        This endpoint creates an asset. Asset is a unique record of name, type, locale, e.g. low_pressure_alert, sms, en-us.
        Asset is considered to be ready for production use if its released flag is set to true (it is defaulted to false).
        Each asset can be tagged. Name, type, locale and value are the mandatory properties. Released, tags are optional.
        All other properties provided will be ignored. Multiple tags can be applied to the asset. The response is an echo
        of provided properties of the request body plus created time. updated time and an asset id. The returned asset id is uuid formatted.
      parameters:
      - description: create asset
        in: body
        name: asset
        required: true
        schema:
          $ref: '#/definitions/models.Asset'
          type: object
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/models.Asset'
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
      summary: creates new asset
      tags:
      - localization
  /assets/:
    delete:
      consumes:
      - application/json
      description: This endpoint deletes localized asset by id, id has to be uuid
        formatted
      parameters:
      - description: asset id
        in: path
        name: id
        required: true
        type: string
      responses:
        "204":
          description: No Content
          schema:
            $ref: '#/definitions/models.Asset'
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
      summary: deletes localized asset by id
      tags:
      - localization
    get:
      consumes:
      - application/json
      description: This endpoint gets localized asset by id, id has to be uuid formatted
      parameters:
      - description: asset id
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Asset'
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
      summary: gets localized asset by id
      tags:
      - localization
    post:
      consumes:
      - application/json
      description: This endpoint updates an asset by its id and provided json body.
        Id, created are the immutable fields.
      parameters:
      - description: asset id
        in: path
        name: id
        required: true
        type: string
      - description: update asset
        in: body
        name: asset
        required: true
        schema:
          $ref: '#/definitions/models.Asset'
          type: object
      responses:
        "204": {}
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
      summary: updates an asset
      tags:
      - localization
  /locales:
    get:
      consumes:
      - application/json
      description: 'This endpoint gets filtered (if any filters provided) paginated
        locales. Default values for pagination are: 0 for offset, 10 for limit.'
      parameters:
      - description: filter by fallback
        in: query
        name: fallback
        type: string
      - description: filter by released flag
        in: query
        name: released
        type: boolean
      - description: pagination offset
        in: query
        name: offset
        type: integer
      - description: pagination limit
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Locales'
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
      summary: gets locales
      tags:
      - localization
    post:
      consumes:
      - application/json
      description: |-
        This endpoint creates a locale. Locale is in the format of ll-cc (ll is language, cc is country),
        e.g. en-us. The id of the locale is the locale itself. Locale is considered to be ready for production
        use if its released flag is set to true. Each locale has a fallback
      parameters:
      - description: create locale
        in: body
        name: locale
        required: true
        schema:
          $ref: '#/definitions/models.Locale'
          type: object
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/models.ResponseOnCreatingNewLocale'
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
      summary: creates new locale
      tags:
      - localization
  /locales/:
    delete:
      consumes:
      - application/json
      description: This endpoint deletes locale by id
      parameters:
      - description: locale id
        in: path
        name: id
        required: true
        type: string
      responses:
        "204":
          description: No Content
          schema:
            $ref: '#/definitions/models.Locale'
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
      summary: deletes locale by id
      tags:
      - localization
    get:
      consumes:
      - application/json
      description: This endpoint gets locale by id
      parameters:
      - description: locale id
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Locale'
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
      summary: gets locale by id
      tags:
      - localization
    post:
      consumes:
      - application/json
      description: This endpoint updates a locale by its id and provided json body.
        Id, created are the immutable fields.
      parameters:
      - description: locale id
        in: path
        name: id
        required: true
        type: string
      - description: update locale
        in: body
        name: locale
        required: true
        schema:
          $ref: '#/definitions/models.Locale'
          type: object
      responses:
        "204": {}
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
      summary: updates locale
      tags:
      - localization
  /localized:
    get:
      consumes:
      - application/json
      description: |-
        This endpoint gets localized asset filtered by asset name, asset delivery type and asset locale.
        It can transform an asset value if it's stored as a template (simple find and replace). Find and replace
        values for an asset value have to be passed in as query parameters with a special args. prepend to manifest
        itself as find and replace one.
        Not implemented: If the asset has templated values but replacement query params have not been provided it will return 404.
        For immediate non-cached data use caching=off query param
      parameters:
      - description: asset name
        in: path
        name: name
        required: true
        type: string
      - description: asset type
        in: path
        name: type
        required: true
        type: string
      - description: asset locale
        in: path
        name: locale
        required: true
        type: string
      - description: find and replace param for the localized value
        in: path
        name: args.*
        type: string
      - description: caching flag
        in: path
        name: caching
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Localized'
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
      summary: gets localized transformed asset
      tags:
      - localization
    post:
      consumes:
      - application/json
      description: |-
        This endpoint gets localized assets filtered by asset name, asset delivery type and asset locale
        (each individual filter is baked in items of request body).
        It can transform an asset value if it's stored as a template (simple find and replace). Find and replace
        values for an asset value have to be passed as an args property of the request body of the item.
        Not implemented: If the asset has templated values but replacement query params have not been provided it will return 404.
        For immediate non-cached data use caching=off query param
      parameters:
      - description: create asset
        in: body
        name: asset
        required: true
        schema:
          $ref: '#/definitions/models.LocalizedRequestItems'
          type: object
      - description: caching flag
        in: path
        name: caching
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.Localized'
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
      summary: gets one or more localized transformed assets
      tags:
      - localization
  /ping:
    get:
      consumes:
      - application/json
      description: check the health status of the service (web server and db connection),
        lists its build data (commit sha, commit name, build date)
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/models.Ping'
            type: array
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
      summary: validates if the service is up
      tags:
      - localization
  /types:
    get:
      description: 'This endpoint gets filtered (if any filters provided) paginated
        types. Default values for pagination are: 0 for offset, 10 for limit.'
      parameters:
      - description: caching=off forces the handler to go directly to database
        in: query
        name: caching
        type: boolean
      - description: pagination offset
        in: query
        name: offset
        type: integer
      - description: pagination limit
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/models.TypeItems'
            type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/models.ErrorResponse'
            type: object
      summary: gets types
      tags:
      - localization
schemes:
- http
- https
swagger: "2.0"
