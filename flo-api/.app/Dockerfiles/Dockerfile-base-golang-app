FROM 098786959887.dkr.ecr.us-west-2.amazonaws.com/flo-golang-docker:golang-1.8-alpine-run
MAINTAINER Flo Technologies Engineering Team

################################################################################
# Container Scripts
################################################################################
# Add app-env
ADD .docker/bin/app-env /usr/local/bin/app-env
RUN chmod a+x /usr/local/bin/app-env

# Add start
ADD .docker/bin/start /usr/local/bin/start
RUN chmod a+x /usr/local/bin/start

# Add configuration files
ADD .docker/templates/ /etc/templates/

################################################################################
# Add App
################################################################################
ADD ./ /go/

################################################################################
# Volumes
################################################################################
VOLUME ["/var/log/app"]


################################################################################
# Ports
################################################################################

EXPOSE 8000

################################################################################
# Entrypoint
################################################################################

ENTRYPOINT ["/usr/local/bin/start"]
